filelist = list.files('Data', full=TRUE, pattern = '*.csv')
filelist
temp = read.csv(filelist[1])
ehad(temp)
head(temp)
library('dplyr')
library('tidyr')
?gathger
?gather
temp %>%
gather(Year, Value, -row, -col) %>%
head(5)
temp2 <- temp %>%
gather(Year, Value, -row, -col)
head(temp2)
filelist
gsub(filelist, 'Data/\\.csv', '')
gsub(filelist, 'Data/', '')
gsub(filelist, '\\Data/', '')
filelist
list.files('Data', pattern = '*.csv')
filenames = gsub(list.files('Data', pattern = '*.csv'), '\\.csv', '')
gsub(list.files('Data', pattern = '*.csv'), '\\.csv', '')
filenames = gsub(list.files('Data', pattern = '*.csv')[1], '\\.csv', '')
gsub(list.files('Data', pattern = '*.csv')[1], '\\.csv', '')
list.files('Data', pattern = '*.csv')
gsub(list.files('Data', pattern = '*.csv'), '.csv', '')
data = read.csv('Riparian_Assessment.csv')[,-1]
colnames(data)[1] = 'Riparian Health'
names(data) <- gsub(x = names(data), "\\.", " ")
names(data)
data = read.csv('Riparian_Assessment.csv')[,-1]
colnames(data)[1] = 'Riparian Health'
names(data)
list.files('Data', pattern = '*.csv')
gsub('x.csv', '.csv', ' ')
gsub('x.csv', '*.csv', '')
gsub('x.csv', '\\.csv', '')
gsub('x.csv', '//.csv', '')
gsub('x.csv', '//.', '')
gsub('x.csv', '.', '')
gsub('x.csv', '.', '.csv')
gsub('x.csv', '.\\', '')
gsub('x.csv', '.', '')
?gsub
filenames = gsub('.csv', '', list.files('Data', pattern = '*.csv'))
filenames
x = filenames[1]
x
assign(x, y)
assign(x, 'get')
x
'get'
get
assign(x, 'fuck')
fuck
read.data = function(filename){
temp = read.csv(filename)
temp2 <- temp %>%
gather(Year, filename, -row, -col) %>%
head(5)
}
read.data(filelist[1])
read.data = function(filename){
temp = read.csv(filename)
temp %>%
gather(Year, filename, -row, -col) %>%
head(5)
}
read.data(filelist[1])
read.data = function(filename){
temp = read.csv(filename) %>%
gather(Year, Value, -row, -col) %>%
head(5)
colnames(temp)[4] = filename
temp
}
read.data(filelist[1])
filelist = list.files('Data', pattern = '*.csv')
read.data = function(filename){
temp = read.csv(paste0('Data/',filename)) %>%
gather(Year, Value, -row, -col) %>%
head(5)
colnames(temp)[4] = filename
temp
}
read.data(filelist[1])
read.data = function(filename){
temp = read.csv(paste0('Data/',filename)) %>%
gather(Year, Value, -row, -col) %>%
head(5)
colnames(temp)[4] = gsub('.csv', '',filename)
temp
}
read.data(filelist[1])
# Alces Correlations to Riparian Health
rm(list = ls())
library('shiny')
library('dplyr')
library('tidyr')
library('corrplot')                     # package corrplot
library('MASS')
# Fit Plot FUNCTION
fit.plot = function(x){
par(mfrow = c(1,2))
# Plot Predicted Model against Observed Values
plot(data$`Riparian Health`, x$fitted.values, pch = 19,
xlab = 'Observed Riparian Health', ylab = 'Predicted Riparian Health',
main = '')
abline(0,1, col = 'grey60')
# Plot Residuals
plot(x$residuals, pch = 19, ylab = 'Residuals')
abline(h = 0, lwd = 2, lty = 2, col = 'grey60')
}
####################
# Read in the Data #
####################
filelist = list.files('Data', pattern = '*.csv')
filenames = gsub('.csv', '', list.files('Data', pattern = '*.csv'))
# if(length(filelist) < 2){	data <- read.csv(filelist)} else 	{
#   data <- do.call("rbind", lapply(filelist, function(x) read.csv(x)) )	}
read.data = function(filename){
temp = read.csv(paste0('Data/',filename)) %>%
gather(Year, Value, -row, -col) %>%
head(10)
temp$Year = gsub('X','',temp$Year)
colnames(temp)[4] = gsub('.csv', '',filename)
temp
}
filelist
x = lapply(filelist, function(x) read.data(x))
head(x)
data = lapply(filelist, function(x) read.data(x)) %>%
Reduce(function(x,y) full_join(x,y, by = c('row', 'col', 'Year')), .)
head(data)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
head(data)
cor_matrix = cor(data)             # get correlations
cor_matrix = cor(data[,-c('row', 'col', 'Year')])             # get correlations
head(data)
head(data[,-1:-3])
head(data[,-c('row')])
head(data[,-'row'])
head(data[,c(-'row')])
head(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
cor_matrix = cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])# get correlations
head(data[,!(colnames(data) %in% c('row', 'col', 'Year')))
head(data[,!(colnames(data) %in% c('row', 'col', 'Year')))]
head(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
tail(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
cor_matrix = cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])# get correlations
corrplot(cor_matrix, method = "ellipse", order = 'AOE') # plot matrix
filelist = list.files('Data', pattern = '*.csv')
read.data = function(filename){
temp = read.csv(paste0('Data/',filename)) %>%
gather(Year, Value, -row, -col)
temp$Year = gsub('X','',temp$Year)
colnames(temp)[4] = gsub('.csv', '',filename)
temp
}
# Read in and merge all datasets
data = lapply(filelist, function(x) read.data(x)) %>%
Reduce(function(x,y) full_join(x,y, by = c('row', 'col', 'Year')), .)
cor_matrix = cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])# get correlations
corrplot(cor_matrix, method = "ellipse", order = 'AOE') # plot matrix
fit <- lm(dummy~.,data=data[,-c('row','col','Year')])
fit <- lm(dummy~.,data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
step <- stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
summary(step)
fit.plot(step)
head(data)
fit <- lm(fish_habitat~.,data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
step <- stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
# step$anova          # display results
summary(step)
fit.plot(step)
head(step)
step
# Fit Plot FUNCTION
fit.plot = function(x){
par(mfrow = c(1,2))
# Plot Predicted Model against Observed Values
plot(data$fish_habitat, x$fitted.values, pch = 19,
xlab = 'Observed', ylab = 'Predicted',
main = '')
abline(0,1, col = 'grey60')
# Plot Residuals
plot(x$residuals, pch = 19, ylab = 'Residuals')
abline(h = 0, lwd = 2, lty = 2, col = 'grey60')
}
fit.plot(step)
summary(step)
fit.plot(step)
x = 1:10
y = 1:10
sample(x,2)
sample(x,2)
sample(y,2)
set.seed(1)
sample(y,2)
sample(y,2)
sample(y,2)
sample(x,2)
data = sample(data, 1000)
dim(data)
data = data[sample(nrow(data), 1000), ]
cor_matrix = cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])# get correlations
corrplot(cor_matrix, method = "ellipse", order = 'AOE') # plot matrix
cor_matrix = cor(data[,!(colnames(data) %in% c('row', 'col', 'Year'))])# get correlations
corrplot(cor_matrix, method = "ellipse", order = 'AOE') # plot matrix
fit <- lm(fish_habitat~.,data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
step <- stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
# step$anova          # display results
summary(step)
fit.plot(step)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Alces Correlations to Riparian Health
rm(list = ls())
library('shiny')
library('dplyr')
library('tidyr')
library('corrplot')                     # package corrplot
library('MASS')
# Fit Plot FUNCTION
fit.plot = function(x){
par(mfrow = c(1,2))
# Plot Predicted Model against Observed Values
plot(data$fish_habitat, x$fitted.values, pch = 19,
xlab = 'Observed', ylab = 'Predicted',
main = '')
abline(0,1, col = 'grey60')
# Plot Residuals
plot(x$residuals, pch = 19, ylab = 'Residuals')
abline(h = 0, lwd = 2, lty = 2, col = 'grey60')
}
####################
# Read in the Data #
####################
filelist = list.files('Data', pattern = '*.csv')
read.data = function(filename){
temp = read.csv(paste0('Data/',filename)) %>%
gather(Year, Value, -row, -col)
temp$Year = gsub('X','',temp$Year)
colnames(temp)[4] = gsub('.csv', '',filename)
temp
}
# Read in and merge all datasets
data = lapply(filelist, function(x) read.data(x)) %>%
Reduce(function(x,y) full_join(x,y, by = c('row', 'col', 'Year')), .)
data = data[sample(nrow(data), 1000), ]
colnames(data)[-1:-4]
colnames(data)[-1:-3]
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
head(data)
write.csv(data, 'data.csv')
write.csv(data, 'data.csv', row.names = F)
data = read.csv('Data/data.csv')
head(data)
fit <- lm(dummy~. , data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
fit
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
dim(data)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
hea(data)
head(data)
tail(data)
fit = lm(dummy~.data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
fit = lm(dummy~. , data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
fit
plot(fit)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
fit
fit <- lm(data[,'dummy']~. , data=data[,!(colnames(data) %in% c('row', 'col', 'Year'))])
fit
stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
fit <- lm(data[,'dummy']~. ,
data=data[,!(colnames(data) %in% c('row', 'col', 'Year') ) ]   )
fi
fit
step = stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
fit.plot(step)
fit <- lm(data[,'fish_habitat']~. ,
data=data[,!(colnames(data) %in% c('row', 'col', 'Year') ) ]   )
fit
fit.plot(step)
step = stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
fit.plot(step)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
fit = lm(fish_habitat~. data = data)
fit = lm(fish_habitat~. , data = data)
fit
step = stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
step = stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
step
fit.plot(data$fish_habitat, step)
summary(step)
source('~/Dropbox/Hydrology Consulting Work/Alces Correlations/ModelBuilder1.0/RunModelBuilder.R', echo=TRUE)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
fit = lm(fish_habitat~. , data = data)
step = stepAIC(fit, scope = list(upper = fit, lower = ~1), direction="both", steps = 1000)
summary(step)
class(step)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
head(data)
min(data$Year)
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
?sliderInput
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
head(data)
head(filter(data, Year %in% 1999:2001))
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
# Run ALCES ModelBuilder
library('shiny')
source('ModelBuilder/helper.R')
runApp('ModelBuilder')
